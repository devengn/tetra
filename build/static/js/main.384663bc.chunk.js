(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){e.exports=n.p+"static/media/logo.0a003fa6.png"},function(e,t,n){e.exports=n(4)},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.r(t);var a=-1,s=[[[[1,1,1,1]],[[1],[1],[1],[1]]],[[[0,1],[1,1,1]],[[1],[1,1],[1]],[[1,1,1],[0,1]],[[0,1],[1,1],[0,1]]],[[[1,1],[1,1]]],[[[1,1],[0,1,1]],[[0,1],[1,1],[1]]],[[[0,1,1],[1,1]],[[1],[1,1],[0,1]]],[[[1],[1],[1,1]],[[1,1,1],[1]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]]],[[[0,1],[0,1],[1,1]],[[1],[1,1,1]],[[1,1],[1],[1]],[[1,1,1],[0,0,1]]]];var c=function(){function e(){o(this,e),this._shapes=function e(){var t=Math.round(Math.random()*(s.length-1));return t===a?e():(a=t,s[t])}(),this._shapeIndex=Math.round(Math.random()*(this._shapes.length-1)),this.x=8,this.y=0}return r(e,[{key:"rotate",value:function(){this._shapeIndex++,this._shapeIndex>this._shapes.length-1&&(this._shapeIndex=0)}},{key:"unrotate",value:function(){this._shapeIndex--,this._shapeIndex<0&&(this._shapeIndex=this._shapes.length-1)}},{key:"collided",value:function(e){var t=this,n=!1;return this.shape.forEach(function(o,i){var r=i+t.y;r>e.length-1?n=!0:o.forEach(function(o,i){var a=i+t.x;o&&e[r][a]&&(n=!0)})}),n}},{key:"shape",get:function(){return this._shapes[this._shapeIndex]}}]),e}();function u(e,t,n,o){e.fillRect(n*t,o*t-2*t,t,2),e.fillRect(n*t,o*t+t-2-2*t,t,2),e.fillRect(n*t,o*t-2*t,2,t),e.fillRect(n*t+t-2,o*t-2*t,2,t),e.fillRect(n*t+4,o*t+4-2*t,t/2,t/2)}function h(e,t,n){n.shape.forEach(function(o,i){o.forEach(function(o,r){o&&u(e,t,r+n.x,i+n.y)})})}function l(e,t){var n=Object.assign({},e);for(Object.setPrototypeOf(n,c.prototype);!1===n.collided(t);)n.y+=1;return n.y-=1,n}function d(e){for(var t=[],n=0;n<e;n++){for(var o=[],i=0;i<20;i++)o.push(0);t.push(o)}return t}var f=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);function v(e){"vibrate"in navigator&&navigator.vibrate(e)}var T=new(function(){function e(){o(this,e),this.KEYS={ENTER:"ENTER",UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",PAUSE:"PAUSE"},this.INPUT_TYPE={TOUCH:"TOUCH",KEYBOARD:"KEYBOARD"},this._listeners=[],this._init(),this._touchInitX=0,this._touchInitY=0,this._touchMoveX=0,this._touchMoveY=0}return r(e,[{key:"_init",value:function(){this._onTouchStart=this._onTouchStart.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onKeyDown=this._onKeyDown.bind(this),window.addEventListener("touchstart",this._onTouchStart),window.addEventListener("touchmove",this._onTouchMove),window.addEventListener("touchend",this._onTouchEnd),window.addEventListener("keydown",this._onKeyDown)}},{key:"_fire",value:function(e,t){v(10),this._listeners.filter(function(t){return t.key===e}).forEach(function(e){return e.fn(e.uid,t)})}},{key:"_uid",value:function(){return Math.random().toString(32).substr(2)}},{key:"_onTouchStart",value:function(e){var t=this,n=e.touches[0],o=n.clientX,i=n.clientY;this._touchInitX=o,this._touchMoveX=o,this._touchInitY=i,this._touchMoveY=i,this._touchId=this._uid();setTimeout(function e(n){if(null!==t._touchId&&t._touchId===n){var o=t.KEYS,i=o.LEFT,r=o.RIGHT,a=t.INPUT_TYPE.TOUCH;t._touchInitX<window.innerWidth/2?t._fire(i,a):t._fire(r,a),setTimeout(e.bind(t,n),150)}}.bind(this,this._touchId),300)}},{key:"_onTouchMove",value:function(e){this._touchId=null;var t=e.touches[0],n=t.clientX,o=t.clientY;this._touchMoveX=n,this._touchMoveY=o}},{key:"_onTouchEnd",value:function(){this._touchId=null;var e=this.INPUT_TYPE.TOUCH,t=this.KEYS,n=t.UP,o=t.DOWN,i=t.LEFT,r=t.RIGHT,a=t.ENTER,s=this._touchMoveX-this._touchInitX,c=this._touchMoveY-this._touchInitY,u=s<0?-1*s:s,h=c<0?-1*c:c;if(u<10&&h<10)return this._fire(a,e),void(this._touchInitX<window.innerWidth/2?this._fire(i,e):this._fire(r,e));h>u?c<0?this._fire(n,e):this._fire(o,e):s<0?this._fire(i,e):this._fire(r,e)}},{key:"_onKeyDown",value:function(e){var t=e.key.toLowerCase(),n=this.INPUT_TYPE.KEYBOARD,o=this.KEYS,i=o.UP,r=o.DOWN,a=o.LEFT,s=o.RIGHT,c=o.ENTER,u=o.PAUSE;switch(t){case"arrowup":case"w":case" ":this._fire(i,n);break;case"arrowdown":case"s":this._fire(r,n);break;case"arrowleft":case"a":this._fire(a,n);break;case"arrowright":case"d":this._fire(s,n);break;case"enter":this._fire(c,n);break;case"p":this._fire(u,n)}}},{key:"on",value:function(e,t){this._listeners.push({uid:this._uid(),key:e,fn:t})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this._listeners=e?this._listeners.filter(function(t){return t.uid!==e}):[]}}]),e}()),p=function(){var e=document.querySelector(".gameplay"),t=document.querySelector(".canvas"),n=document.querySelector(".score"),o=document.querySelector(".best"),i=document.querySelector(".pause"),r=document.querySelector(".alert");e.classList.remove("hidden");var a=t.clientWidth,s=a/20,p=Math.floor(t.clientHeight/s)+2,E=(p-2)*s;t.style.height="".concat(E,"px"),t.width=a,t.height=E;var m=t.getContext("2d"),_={pause:!1,score:0,speed:500,best:parseInt(localStorage.getItem("best")||0,10),block:new c,wall:d(p),lastFrame:0,controlsLocked:!1,gameOver:!1,gameOverAniFrame:0,newGame:!1,newGameAniFrame:0};function w(){_.pause=!_.pause,_.pause?(_.controlsLocked=!0,r.innerHTML="PAUSED",r.classList.remove("hidden"),i.innerHTML="Resume"):(_.controlsLocked=!1,r.classList.add("hidden"),i.innerHTML="Pause")}function S(e){var t=e-_.lastFrame,i=_.block,a=_.wall,s=_.speed,u=_.pause,h=_.gameOver,l=_.gameOverAniFrame,d=_.newGame,p=_.newGameAniFrame;if(u)requestAnimationFrame(S);else{if(h){var E=a.length-1-l;if(E>=0){for(var m=0;m<20;m++)a[E][m]=1;return _.gameOverAniFrame++,void requestAnimationFrame(g)}return r.innerHTML="GAME OVER",r.classList.remove("hidden"),void T.on(T.KEYS.ENTER,function(e){T.clear(e),r.classList.add("hidden"),_.gameOver=!1,_.gameOverAniFrame=0,_.newGame=!0,_.newGameAniFrame=0,requestAnimationFrame(S)})}if(d){if(a[p]){for(var w=0;w<20;w++)a[p][w]=0;return _.newGameAniFrame++,void requestAnimationFrame(g)}return _.newGameAniFrame=0,_.newGame=!1,_.block=new c,_.score=0,_.speed=500,n.innerHTML=0,void requestAnimationFrame(S)}if(a[2].find(function(e){return 1===e}))return _.gameOver=!0,v([150,30,150,30,150]),void requestAnimationFrame(g);t>s&&(i.y+=1,i.collided(a)&&(i.y-=1,function(e,t){t.shape.forEach(function(n,o){var i=o+t.y;n.forEach(function(n,o){var r=t.x+o;n&&(e[i][r]=1)})})}(a,i),_.block=new c),function(e,t){e.forEach(function(n,o){if(n.length===n.filter(function(e){return 1===e}).length){t(),e.splice(o,1);for(var i=[],r=0;r<20;r++)i.push(0);e.unshift(i)}})}(a,function(){_.speed-=10;var e=f?100:50;_.speed<e&&(_.speed=e),v(500),_.score++;var t=parseInt(localStorage.getItem("best")||0,10);_.score>t&&(_.best=_.score,localStorage.setItem("best",_.score)),n.innerHTML=_.score,o.innerHTML=_.best}),_.controlsLocked=!1,_.lastFrame=e),requestAnimationFrame(g)}}function g(){var e=_.block,t=_.wall,n=_.newGame,o=_.gameOver;m.clearRect(0,0,a,E),!1===n&&!1===o&&(m.fillStyle="rgb(193, 219, 195)",h(m,s,l(e,t))),m.fillStyle="rgb(108, 108, 108)",h(m,s,e),function(e,t,n){n.forEach(function(n,o){n.forEach(function(n,i){n&&u(e,t,i,o)})})}(m,s,t),requestAnimationFrame(S)}T.on(T.KEYS.LEFT,function(){var e=_.block,t=_.wall;_.controlsLocked||(e.x-=1,(e.x<0||e.collided(t))&&(e.x+=1))}),T.on(T.KEYS.RIGHT,function(){var e=_.block,t=_.wall;_.controlsLocked||(e.x+=1,(e.x+e.shape.reduce(function(e,t){var n=t.length-1;return n>e&&(e=n),e},0)>19||e.collided(t))&&(e.x-=1))}),T.on(T.KEYS.UP,function(){var e=_.block,t=_.wall;if(!_.controlsLocked){e.rotate();var n=e.x+e.shape.reduce(function(e,t){var n=t.length-1;return n>e&&(e=n),e},0),o=e.x+(e.shape.length-1);(n>19||o>p||e.collided(t))&&e.unrotate()}}),T.on(T.KEYS.DOWN,function(){var e=_.block,t=_.wall;if(!_.controlsLocked){var n=l(e,t);e.y=n.y,_.controlsLocked=!0}}),T.on(T.KEYS.PAUSE,w),i.addEventListener("touchstart",function(e){return e.stopPropagation()}),i.addEventListener("touchend",function(e){e.stopPropagation(),w()}),o.innerHTML=_.best,S()},E={START_ACTION:f?"Tap to Start":"Press ENTER",CONTINUE_ACTION:f?"Tap to Continue":"Press ENTER",INSTRUCTIONS:"INSTRUCTIONS",INSTRUCTIONS_PARAGRAPHS:f?["RIGHT/LEFT - tap on the desired side of the screen","ROTATE - swipe up","INSTANT FALL - swipe down"]:["RIGHT/LEFT - right and left arrow key","ROTATE - up arrow key or spacebar","INSTANT FALL - down arrow key","PAUSE - p"],SCORE:"Score",BEST:"Best"},m={START_ACTION:f?"Toque para Come\xe7ar":"Pressione ENTER",CONTINUE_ACTION:f?"Toque para Continuar":"Pressione ENTER",INSTRUCTIONS:"INSTRU\xc7\xd5ES",INSTRUCTIONS_PARAGRAPHS:f?["DIREITA/ESQUERDA - toque no lado desejado da tela","GIRAR - deslize o dedo para cima","QUEDA BRUSCA - deslize o dedo para baixo"]:["DIREITA/ESQUERDA - use as setas direita e esquerda","GIRAR - seta para cima, ou barra de espa\xe7o","QUEDA BRUSCA - seta para baixo","PAUSAR - p"],SCORE:"Pontos",BEST:"Recorde"},_="pt-BR"===navigator.language?m:E;var w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var g=n(0),I=n.n(g);n(2),n(3);document.addEventListener("touchmove",function(e){return e.preventDefault()},{passive:!1}),document.querySelector(".game").classList.add(f?"mobile":"desktop"),document.querySelector(".logo").src=I.a,document.querySelector(".start").innerHTML=_.START_ACTION,document.querySelector(".instructions").innerHTML="\n  <p>".concat(_.INSTRUCTIONS,":</p>\n  ").concat(_.INSTRUCTIONS_PARAGRAPHS.map(function(e){return"<p>".concat(e,"</p>")}).join(""),"\n"),document.querySelector(".score-str").innerHTML=_.SCORE,document.querySelector(".best-str").innerHTML=_.BEST,Array.from(document.querySelector("*")).forEach(function(e){return e.addEventListener("click",function(e){return e.preventDefault()})}),function(){var e=document.querySelector(".intro"),t=document.querySelector(".start"),n=document.querySelector(".instructions"),o=document.querySelector(".footer");T.on(T.KEYS.ENTER,function(){if(t.classList.contains("hidden"))return T.clear(),e.classList.add("hidden"),void p();t.classList.add("hidden"),n.classList.remove("hidden"),o.innerHTML=_.CONTINUE_ACTION})}(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");w?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):S(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):S(t,e)})}}()}],[[1,1]]]);
//# sourceMappingURL=main.384663bc.chunk.js.map