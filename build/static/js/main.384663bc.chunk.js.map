{"version":3,"sources":["logo.png","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","block.js","helpers.js","controls.js","gameplay.js","strings.js","serviceWorker.js","index.js","intro.js"],"names":["module","exports","__webpack_require__","p","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","prevIndex","shapes","_default","this","_shapes","getNewBlockShape","index","Math","round","random","_shapeIndex","x","y","wall","_this","collided","shape","forEach","columns","blockY","filled","blockX","render_pixel","ctx","size","fillRect","border","render_block","block","shadow_of_block","shadow","assign","setPrototypeOf","Block","build_empty_wall","nlines","cols","j","push","isMobile","navigator","userAgent","match","vibrate","pattern","controls","Controls","KEYS","ENTER","UP","DOWN","LEFT","RIGHT","PAUSE","INPUT_TYPE","TOUCH","KEYBOARD","_listeners","_init","_touchInitX","_touchInitY","_touchMoveX","_touchMoveY","_onTouchStart","bind","_onTouchMove","_onTouchEnd","_onKeyDown","window","addEventListener","inputType","filter","e","fn","uid","toString","substr","evt","_evt$touches$","touches","clientX","clientY","_touchId","_uid","setTimeout","longPress","id","_this$KEYS","innerWidth","_fire","_evt$touches$2","_this$KEYS2","movedX","movedY","diffX","diffY","toLowerCase","_this$KEYS3","arguments","undefined","gameplay","$gameplay","document","querySelector","$canvas","$score","$best","$pause","$alert","classList","remove","WIDTH","clientWidth","BLOCK_SIZE","NLINES","floor","clientHeight","HEIGHT","style","height","concat","width","getContext","state","pause","score","speed","best","parseInt","localStorage","getItem","lastFrame","controlsLocked","gameOver","gameOverAniFrame","newGame","newGameAniFrame","togglePause","innerHTML","add","update","ts","diffts","requestAnimationFrame","render","on","clear","find","b","merge_block_with_wall","successCallback","cell","splice","newline","unshift","clear_wall","maxSpeed","setItem","clearRect","fillStyle","render_wall","reduce","prev","curr","rotate","blockMaxX","blockMaxY","unrotate","stopPropagation","en","START_ACTION","CONTINUE_ACTION","INSTRUCTIONS","INSTRUCTIONS_PARAGRAPHS","SCORE","BEST","pt","lang","language","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","preventDefault","passive","src","LOGO","str","map","join","Array","from","$el","$intro","$start","$instructions","$footer","contains","intro","URL","process","href","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.384663bc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.0a003fa6.png\";","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","let prevIndex = -1;\n\nconst shapes = [\n  // stick\n  [\n    [\n      [1, 1, 1, 1],\n    ],\n    [\n      [1],\n      [1],\n      [1],\n      [1],\n    ],\n  ],\n  // triangle\n  [\n    [\n      [0, 1],\n      [1, 1, 1],\n    ],\n    [\n      [1],\n      [1, 1],\n      [1],\n    ],\n    [\n      [1, 1, 1],\n      [0, 1],\n    ],\n    [\n      [0, 1],\n      [1, 1],\n      [0, 1],\n    ],\n  ],\n  // box\n  [\n    [\n      [1, 1],\n      [1, 1],\n    ],\n  ],\n  // z\n  [\n    [\n      [1, 1],\n      [0, 1, 1],\n    ],\n    [\n      [0, 1],\n      [1, 1],\n      [1]\n    ],\n  ],\n  // inverted-z\n  [\n    [\n      [0, 1, 1],\n      [1, 1],\n    ],\n    [\n      [1],\n      [1, 1],\n      [0, 1],\n    ],\n  ],\n  // l\n  [\n    [\n      [1],\n      [1],\n      [1, 1],\n    ],\n    [\n      [1, 1, 1],\n      [1],\n    ],\n    [\n      [1, 1],\n      [0, 1],\n      [0, 1],\n    ],\n    [\n      [0, 0, 1],\n      [1, 1, 1],\n    ],\n  ],\n  // inverted-l\n  [\n    [\n      [0, 1],\n      [0, 1],\n      [1, 1],\n    ],\n    [\n      [1],\n      [1, 1, 1],\n    ],\n    [\n      [1, 1],\n      [1],\n      [1],\n    ],\n    [\n      [1, 1, 1],\n      [0, 0, 1],\n    ],\n  ],\n];\n\nfunction getNewBlockShape() {\n  const index = Math.round(Math.random() * (shapes.length - 1));\n  if (index === prevIndex) return getNewBlockShape();\n  prevIndex = index;\n  return shapes[index];\n}\n\nexport default class {\n  constructor() {\n    this._shapes = getNewBlockShape();\n    this._shapeIndex = Math.round(Math.random() * (this._shapes.length - 1));\n    this.x = 8;\n    this.y = 0;\n  }\n\n  get shape() {\n    return this._shapes[this._shapeIndex];\n  }\n\n  rotate() {\n    this._shapeIndex++;\n    if (this._shapeIndex > this._shapes.length - 1) {\n      this._shapeIndex = 0;\n    }\n  }\n\n  unrotate() {\n    this._shapeIndex--;\n    \n    if (this._shapeIndex < 0) {\n      this._shapeIndex = this._shapes.length - 1;\n    }\n  }\n\n  collided(wall) {\n    let collided = false;\n\n    this\n      .shape\n      .forEach((columns, blockY) => {\n        const y = blockY + this.y;\n        if (y > wall.length - 1) {\n          collided = true;\n          return;\n        }\n\n        columns\n          .forEach((filled, blockX) => {\n            const x = blockX + this.x;\n\n            if (filled && wall[y][x]) {\n              collided = true;\n            }\n          });\n      });\n\n    return collided;\n  }\n}","import Block from './block';\n\nexport function render_pixel(ctx, size, x, y) {\n  const border = 2;\n  ctx.fillRect(x * size, y * size - (size * 2), size, border); // top\n  ctx.fillRect(x * size, y * size + size - border - (size * 2), size, border); // bottom\n  ctx.fillRect(x * size, y * size - (size * 2), border, size); // left\n  ctx.fillRect(x * size + size - border, y * size - (size * 2), border, size); // right\n  ctx.fillRect(x * size + border * 2, y * size + border * 2 - (size * 2), size / 2, size / 2); // middle\n}\n\nexport function render_block(ctx, size, block) {\n  block\n    .shape\n    .forEach((columns, y) => {\n      columns\n        .forEach((filled, x) => {\n          if (!filled) return;\n          render_pixel(ctx, size, x + block.x, y + block.y);\n        });\n    });\n}\n\nexport function render_wall(ctx, size, wall) {\n  wall\n    .forEach((columns, y) => {\n      columns.forEach((filled, x) => {\n        if (filled) render_pixel(ctx, size, x, y);\n      });\n    });\n}\n\nexport function shadow_of_block(block, wall) {\n  const shadow = Object.assign({}, block);\n  Object.setPrototypeOf(shadow, Block.prototype);\n\n  while (shadow.collided(wall) === false) {\n    shadow.y += 1;\n  }\n\n  shadow.y -= 1;\n  return shadow;\n}\n\nexport function build_empty_wall(nlines) {\n  const wall = [];\n\n  for (let i = 0; i < nlines; i++) {\n    const cols = [];\n    for (let j = 0; j < 20; j++) {\n      cols.push(0);\n    }\n    wall.push(cols);\n  }\n\n  return wall;\n}\n\nexport function merge_block_with_wall(wall, block) {\n  block\n    .shape\n    .forEach((columns, blockY) => {\n      const y = blockY + block.y;\n      columns\n        .forEach((filled, blockX) => {\n          const x = block.x + blockX;\n          if (filled) wall[y][x] = 1;\n        });\n    });\n}\n\nexport function clear_wall(wall, successCallback) {\n  wall\n    .forEach((columns, index) => {\n      if (columns.length === columns.filter(cell => cell === 1).length) {\n        successCallback();\n        wall.splice(index, 1);\n        const newline = [];\n        for (let i = 0; i < 20; i++) newline.push(0);\n        wall.unshift(newline);\n      }\n    });\n}\n\nexport const isMobile = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);\n\nexport function vibrate(pattern) {\n  if ('vibrate' in navigator) {\n    navigator.vibrate(pattern);\n  }\n}","import { vibrate } from './helpers';\n\nclass Controls {\n  constructor() {  \n    this.KEYS = {\n      ENTER: 'ENTER',\n      UP: 'UP',\n      DOWN: 'DOWN',\n      LEFT: 'LEFT',\n      RIGHT: 'RIGHT',\n      PAUSE: 'PAUSE',\n    };\n\n    this.INPUT_TYPE = {\n      TOUCH: 'TOUCH',\n      KEYBOARD: 'KEYBOARD'\n    };\n\n    this._listeners = [];\n    this._init();\n\n    this._touchInitX = 0;\n    this._touchInitY = 0;\n    this._touchMoveX = 0;\n    this._touchMoveY = 0;\n  }\n\n  _init() {\n    this._onTouchStart = this._onTouchStart.bind(this);\n    this._onTouchMove = this._onTouchMove.bind(this);\n    this._onTouchEnd = this._onTouchEnd.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n\n    window.addEventListener('touchstart', this._onTouchStart);\n    window.addEventListener('touchmove', this._onTouchMove);\n    window.addEventListener('touchend', this._onTouchEnd);\n    window.addEventListener('keydown', this._onKeyDown);\n  }\n\n  _fire(key, inputType) {\n    vibrate(10);\n    this._listeners\n      .filter(e => e.key === key)\n      .forEach(e => e.fn(e.uid, inputType));\n  }\n\n  _uid() {\n    return Math\n      .random()\n      .toString(32)\n      .substr(2);\n  }\n\n  _onTouchStart(evt) {\n    const {\n      clientX: x,\n      clientY: y,\n    } = evt.touches[0];\n    \n    this._touchInitX = x;\n    this._touchMoveX = x;\n    this._touchInitY = y;\n    this._touchMoveY = y;\n    this._touchId = this._uid();\n\n    const longPress = (id) => {\n      if (this._touchId === null || this._touchId !== id) return;\n      \n      const { LEFT, RIGHT } = this.KEYS;\n      const { TOUCH } = this.INPUT_TYPE;\n\n      if (this._touchInitX < window.innerWidth / 2) {\n        this._fire(LEFT, TOUCH);\n      } else {\n        this._fire(RIGHT, TOUCH);\n      }\n\n      setTimeout(longPress.bind(this, id), 150);\n    }\n\n    setTimeout(longPress.bind(this, this._touchId), 300);\n  }\n\n  _onTouchMove(evt) {\n    this._touchId = null;\n\n    const {\n      clientX: x,\n      clientY: y,\n    } = evt.touches[0];\n    \n    this._touchMoveX = x;\n    this._touchMoveY = y;\n  }\n\n  _onTouchEnd() {\n    this._touchId = null;\n\n    const { TOUCH } = this.INPUT_TYPE;\n    const {\n      UP,\n      DOWN,\n      LEFT,\n      RIGHT,\n      ENTER,\n    } = this.KEYS;\n\n    const movedX = this._touchMoveX - this._touchInitX;\n    const movedY = this._touchMoveY - this._touchInitY;\n    \n    const diffX = movedX < 0\n      ? movedX * -1 : movedX;\n    const diffY = movedY < 0\n      ? movedY * -1 : movedY;\n\n    if (diffX < 10 && diffY < 10) {\n      // Fire ENTER\n      this._fire(ENTER, TOUCH);\n      \n      if (this._touchInitX < window.innerWidth / 2) {\n        this._fire(LEFT, TOUCH);\n      } else {\n        this._fire(RIGHT, TOUCH);\n      }\n\n      return;\n    }\n\n    if (diffY > diffX) {\n      // Y axis\n      if (movedY < 0) {\n        // UP\n        this._fire(UP, TOUCH);\n      } else {\n        // DOWN\n        this._fire(DOWN, TOUCH);\n      }\n\n      return;\n    }\n\n    // X axis\n    if (movedX < 0) {\n      // LEFT\n      this._fire(LEFT, TOUCH);\n    } else {\n      this._fire(RIGHT, TOUCH);\n    }\n  }\n\n  _onKeyDown(evt) {\n    const key = evt.key.toLowerCase();\n    const { KEYBOARD } = this.INPUT_TYPE;\n    const {\n      UP,\n      DOWN,\n      LEFT,\n      RIGHT,\n      ENTER,\n      PAUSE,\n    } = this.KEYS;\n\n    switch (key) {\n      case 'arrowup':\n      case 'w':\n      case ' ':\n        this._fire(UP, KEYBOARD);\n        break;\n\n      case 'arrowdown':\n      case 's':\n        this._fire(DOWN, KEYBOARD);\n        break;\n\n      case 'arrowleft':\n      case 'a':\n        this._fire(LEFT, KEYBOARD);\n        break;\n\n      case 'arrowright':\n      case 'd':\n        this._fire(RIGHT, KEYBOARD);\n        break;\n\n      case 'enter':\n        this._fire(ENTER, KEYBOARD);\n        break;\n\n      case 'p':\n        this._fire(PAUSE, KEYBOARD);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  on(key, fn) {\n    this._listeners.push({\n      uid: this._uid(),\n      key,\n      fn\n    });\n  }\n  \n  clear(uid = undefined) {\n    if (!uid) {\n      this._listeners = [];\n      return;\n    }\n\n    this._listeners = this\n      ._listeners\n      .filter(i => i.uid !== uid);\n  }\n}\n\nexport default new Controls();","import controls from './controls';\nimport Block from './block';\nimport {\n  render_block,\n  render_wall,\n  shadow_of_block,\n  build_empty_wall,\n  merge_block_with_wall,\n  clear_wall,\n  isMobile,\n  vibrate,\n} from './helpers';\n\nexport default function() {\n  const $gameplay = document.querySelector('.gameplay');\n  const $canvas = document.querySelector('.canvas');\n  const $score = document.querySelector('.score');\n  const $best = document.querySelector('.best');\n  const $pause = document.querySelector('.pause');\n  const $alert = document.querySelector('.alert');\n\n  // Show gameplay\n  $gameplay.classList.remove('hidden');\n\n  const WIDTH = $canvas.clientWidth;\n  const BLOCK_SIZE = WIDTH / 20;\n  const NLINES = Math.floor($canvas.clientHeight / BLOCK_SIZE) + 2;\n  const HEIGHT = (NLINES - 2) * BLOCK_SIZE;\n\n  $canvas.style.height = `${HEIGHT}px`;\n  $canvas.width = WIDTH;\n  $canvas.height = HEIGHT;\n\n  const ctx = $canvas.getContext('2d');\n  \n  const state = {\n    pause: false,\n    score: 0,\n    speed: 500,\n    best: parseInt(localStorage.getItem('best') || 0, 10),\n    block: new Block(),\n    wall: build_empty_wall(NLINES),\n    lastFrame: 0,\n    controlsLocked: false,\n    gameOver: false,\n    gameOverAniFrame: 0,\n    newGame: false,\n    newGameAniFrame: 0,\n  }\n\n  function togglePause() {\n    state.pause = !state.pause;\n    if (state.pause) {\n      state.controlsLocked = true;\n      $alert.innerHTML = 'PAUSED';\n      $alert.classList.remove('hidden');\n      $pause.innerHTML = 'Resume';\n    } else {\n      state.controlsLocked = false;\n      $alert.classList.add('hidden');\n      $pause.innerHTML = 'Pause';\n    }\n  }\n\n  function update(ts) {\n    const diffts = ts - state.lastFrame;\n    const {\n      block,\n      wall,\n      speed,\n      pause,\n      gameOver,\n      gameOverAniFrame,\n      newGame,\n      newGameAniFrame,\n    } = state;\n\n    if (pause) {\n      requestAnimationFrame(update);\n      return;\n    }\n\n    if (gameOver) {\n      const index = wall.length - 1 - gameOverAniFrame;\n      \n      if (index >= 0) {\n        for (let i = 0; i < 20; i++) {\n          wall[index][i] = 1;\n        }\n\n        state.gameOverAniFrame++;\n        requestAnimationFrame(render);\n        return;\n      }\n\n      $alert.innerHTML = 'GAME OVER';\n      $alert.classList.remove('hidden');\n\n      controls.on(controls.KEYS.ENTER, (uid) => {\n        controls.clear(uid);\n        $alert.classList.add('hidden');\n        state.gameOver = false;\n        state.gameOverAniFrame = 0;\n        state.newGame = true;\n        state.newGameAniFrame = 0;\n        requestAnimationFrame(update);\n      });\n      \n      return;\n    }\n\n    if (newGame) {\n      if (wall[newGameAniFrame]) {\n        for (let i = 0; i < 20; i++) {\n          wall[newGameAniFrame][i] = 0;\n        }\n\n        state.newGameAniFrame++;\n        requestAnimationFrame(render);\n        return;\n      }\n\n      state.newGameAniFrame = 0;\n      state.newGame = false;\n      state.block = new Block();\n      state.score = 0;\n      state.speed = 500;\n      $score.innerHTML = 0;\n      requestAnimationFrame(update);\n      return;\n    }\n\n    if (wall[2].find(b => b === 1)) {\n      state.gameOver = true;\n      vibrate([150, 30, 150, 30, 150]);\n      requestAnimationFrame(render);\n      return;\n    }\n\n    if (diffts > speed) {\n      block.y += 1;\n\n      if (block.collided(wall)) {\n        block.y -= 1;\n        merge_block_with_wall(wall, block);\n        state.block = new Block();\n      }\n\n      clear_wall(wall, () => {\n        // increase speed\n        state.speed -= 10;\n        const maxSpeed = isMobile ? 100 : 50;\n        if (state.speed < maxSpeed) state.speed = maxSpeed;\n        vibrate(500);\n\n        // update score\n        state.score++;\n\n        // update best score\n        const best = parseInt(localStorage.getItem('best') || 0, 10)\n        if (state.score > best) {\n          state.best = state.score;\n          localStorage.setItem('best', state.score);\n        }\n\n        // render score\n        $score.innerHTML = state.score;\n        $best.innerHTML = state.best;\n      });\n\n      state.controlsLocked = false;\n      state.lastFrame = ts;\n    }\n\n    requestAnimationFrame(render);\n  }\n  \n  function render() {\n    const { block, wall, newGame, gameOver } = state;\n    \n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\n    \n    if (newGame === false && gameOver === false) {\n      ctx.fillStyle = 'rgb(193, 219, 195)';\n      render_block(ctx, BLOCK_SIZE, shadow_of_block(block, wall));\n    }\n\n    ctx.fillStyle = 'rgb(108, 108, 108)';\n    render_block(ctx, BLOCK_SIZE, block);\n    render_wall(ctx, BLOCK_SIZE, wall);\n    \n    requestAnimationFrame(update);\n  }\n\n  controls.on(controls.KEYS.LEFT, () => {\n    const { block, wall, controlsLocked } = state;\n\n    // do nothing if controls are locked\n    if (controlsLocked) return;\n    \n    // move block\n    block.x -= 1;\n\n    // undo if block collides or is out of sight\n    if (block.x < 0 || block.collided(wall)) {\n      block.x += 1;\n    } \n  });\n\n  controls.on(controls.KEYS.RIGHT, () => {\n    const { block, wall, controlsLocked } = state;\n\n    // do nothing if controls are locked\n    if (controlsLocked) return;\n\n    // move block\n    block.x += 1;\n\n    const blockMaxX = block.x + block\n      .shape\n      .reduce((prev, curr) => {\n        const length = curr.length - 1;\n        if (length > prev) prev = length;\n        return prev;\n      }, 0);\n\n    // undo if block collides or is out of sight\n    if (blockMaxX > 19 || block.collided(wall)) {\n      block.x -= 1;\n    }\n  });\n\n  controls.on(controls.KEYS.UP, () => {\n    const { block, wall, controlsLocked } = state;\n\n    // do nothing if controls are locked\n    if (controlsLocked) return;\n\n    // rotates block\n    block.rotate();\n\n    const blockMaxX = block.x + block\n      .shape\n      .reduce((prev, curr) => {\n        const length = curr.length - 1;\n        if (length > prev) prev = length;\n        return prev;\n      }, 0);\n    const blockMaxY = block.x + (block.shape.length - 1);\n\n    // undo if block collides or is out of sight\n    if (\n      blockMaxX > 19 ||\n      blockMaxY > NLINES ||\n      block.collided(wall)\n    ) block.unrotate();\n  });\n\n  controls.on(controls.KEYS.DOWN, () => {\n    const { block, wall, controlsLocked } = state;\n\n    // do nothing if controls are locked\n    if (controlsLocked) return;\n\n    const shadow = shadow_of_block(block, wall);\n    block.y = shadow.y;\n\n    // lock controls\n    state.controlsLocked = true;\n  });\n\n  controls.on(controls.KEYS.PAUSE, togglePause);\n\n  // adds function to pause button\n  $pause.addEventListener('touchstart', (e) => e.stopPropagation());\n  $pause.addEventListener('touchend', (e) => {\n    e.stopPropagation();\n    togglePause();\n  });\n\n  $best.innerHTML = state.best;\n  update();\n}","import { isMobile } from './helpers';\n\nconst en = {\n  START_ACTION: isMobile ? 'Tap to Start' : 'Press ENTER',\n  CONTINUE_ACTION: isMobile ? 'Tap to Continue' : 'Press ENTER',\n  INSTRUCTIONS: 'INSTRUCTIONS',\n  INSTRUCTIONS_PARAGRAPHS: isMobile\n    ? [\n        'RIGHT/LEFT - tap on the desired side of the screen',\n        'ROTATE - swipe up',\n        'INSTANT FALL - swipe down',\n    ]\n    : [\n      'RIGHT/LEFT - right and left arrow key',\n      'ROTATE - up arrow key or spacebar',\n      'INSTANT FALL - down arrow key',\n      'PAUSE - p',\n    ],\n  SCORE: 'Score',\n  BEST: 'Best',\n};\n\nconst pt = {\n  START_ACTION: isMobile ? 'Toque para Começar' : 'Pressione ENTER',\n  CONTINUE_ACTION: isMobile ? 'Toque para Continuar' : 'Pressione ENTER',\n  INSTRUCTIONS: 'INSTRUÇÕES',\n  INSTRUCTIONS_PARAGRAPHS: isMobile\n    ? [\n        'DIREITA/ESQUERDA - toque no lado desejado da tela',\n        'GIRAR - deslize o dedo para cima',\n        'QUEDA BRUSCA - deslize o dedo para baixo',\n    ]\n    : [\n      'DIREITA/ESQUERDA - use as setas direita e esquerda',\n      'GIRAR - seta para cima, ou barra de espaço',\n      'QUEDA BRUSCA - seta para baixo',\n      'PAUSAR - p',\n    ],\n  SCORE: 'Pontos',\n  BEST: 'Recorde',\n};\n\nconst lang = navigator.language === 'pt-BR'\n  ? pt : en;\n\nexport default lang;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import intro from './intro';\nimport { isMobile } from './helpers';\nimport str from './strings';\nimport * as serviceWorker from './serviceWorker';\nimport LOGO from './logo.png';\nimport 'typeface-vt323';\nimport './index.css';\n\n// Disable bouncing scroll on iOS\ndocument\n  .addEventListener('touchmove', evt => evt.preventDefault(), { passive: false });\n\n// Detect either is mobile or desktop we're running on\ndocument\n  .querySelector('.game')\n  .classList\n  .add(isMobile ? 'mobile' : 'desktop');\n\n// Display strings\ndocument.querySelector('.logo').src = LOGO;\ndocument.querySelector('.start').innerHTML = str.START_ACTION;\ndocument.querySelector('.instructions').innerHTML = `\n  <p>${str.INSTRUCTIONS}:</p>\n  ${\n    str\n      .INSTRUCTIONS_PARAGRAPHS\n      .map(i => `<p>${i}</p>`)\n      .join('')\n  }\n`;\ndocument.querySelector('.score-str').innerHTML = str.SCORE;\ndocument.querySelector('.best-str').innerHTML = str.BEST;\n\n// Prevent zoom on iOS when double tapping\nArray.from(document.querySelector('*'))\n  .forEach($el => $el.addEventListener('click', e => e.preventDefault()));\n\n// Init intro\nintro();\n\n// Register sw\nserviceWorker.register();","import controls from './controls';\nimport gameplay from './gameplay';\nimport str from './strings';\n\nexport default function intro() {\n  const $intro = document.querySelector('.intro');\n  const $start = document.querySelector('.start');\n  const $instructions = document.querySelector('.instructions');\n  const $footer = document.querySelector('.footer');\n\n  controls.on(controls.KEYS.ENTER, () => {\n    if ($start.classList.contains('hidden')) {\n      controls.clear();\n      $intro.classList.add('hidden');\n      gameplay();\n      return;\n    }\n\n    $start.classList.add('hidden');\n    $instructions.classList.remove('hidden');\n    $footer.innerHTML = str.CONTINUE_ACTION;\n  });\n}"],"sourceRoot":""}